# 移动端数据能力

## 一、数据统计分析

### 1.1、数据统计

移动端的数据可分为两部分：

* 应用基础数据：如新增用户、活跃用户、启动次数、活跃时长等。

> 基础数据是一款应用整体活跃质量最为直观的表现，因此精确度至关重要。

* 精细化的页面数据、事件数据和计数统计事件

> 无埋点的方案可实现对页面的精确统计。
>
> 事件统计和计数统计可以计算某些用户自定义埋点的发生事件以及次数，具有很高的自主性：
>
> 1、次数统计：统计制定行为被触发的次数
>
> 2、时长统计：统计指定行为消耗的时间，单位为秒



### 1.2 埋点方案

移动端常见埋点方式：

* **代码埋点**：通过手写代码的方式来埋点，精准的在需要埋点的代码处添加，方便记录当前上下文，但开发量大，与业务代码耦合严重。
* **可视化埋点**：根据标识来识别每一个事件， 针对指定的事件进行取参埋点。
* **无埋点**：全埋点，与业务代码解耦。埋点成本高，后期解析负载，view\_path不确定

可视化埋点和无埋点都属于无侵入的埋点方案，于业务代码实现解耦。采用这样的无侵入埋点方案，既可以做到埋点被统一维护，又可以实现和工程代码的解耦。

* **运行时方法替换方式进行埋点**
* **事件唯一标识：**唯一标识制定，想办法找出元素间不相同的因素然后进行组合，最后形成一个能够区别于其他元素的标识来。

## 二、数据配置能力

**配置中心核心**：将配置同步到需要它的地方

配置中心是对配置进行治理，能够对配置进行下发管理、版本管理、安全管理、权限管理等。

配置中心有三个核心理念：配置完整性定义；配置下发回显功能；配置缓存优先级设计。

* **配置完整性**：环境变量、编译注入配置、命令行配置、文本文件、远端配置等构成一份完整配置
* **配置下发回显**：配置下发后经过状态回写，保证配置下发成功
* **配置缓存优先级**：根据优先级获取配置能力。

移动端配置中心需要功能如下：

* 支持配置客户端信息与配置项相关，做到不同的客户端获取不同的配置项
* 支持配置增量更新
* 支持客户端配置加密下发，保证安全
* 提供统一后台配置界面，方便进行配置的管理
* 做到配置更新，主动推送到客户端
* 支持配置回滚，删除恢复

<figure><img src="../.gitbook/assets/image.png" alt=""><figcaption><p>配置中心基础设置</p></figcaption></figure>













